// ==UserScript==
// @name        Maelstrom ADDON Basescanner
// @namespace   http*://prodgame*.alliances.commandandconquer.com/*/index.aspx*
// @description Maelstrom ADDON Basescanner
// @include     http*://prodgame*.alliances.commandandconquer.com/*/index.aspx*
// @version     1.0
// @author      BlinDManX
// @grant       none
// ==/UserScript==
(function(){var c=function(){var h=["__msbs_version","Maelstrom_Basescanner "," loaded Serverversion ","log","debug","Maelstrom_Basescanner initalisiert","FileManager","File","getInstance","Language","MaelstromTools","Cache","Base","getLocale","Manager","locale","indexOf","Languages","Point","Data","Position","BaseScanner Overview","Basescanner \xdcbersicht","Vis\xe3o geral do scanner de base","Aper\xe7u du scanner de base","Scan","Scannen","Esquadrinhar","Balayer","Location","Lage","localiza\xe7\xe3o","Emplacement","Player","Spieler","Jogador","Joueur","Bases","Basen","Camp,Outpost","Lager,Vorposten","Camp,posto avan\xe7ado","Camp,avant-poste","BaseScanner Layout","Layout da Base de Dados de Scanner","Mise scanner de base","Show Layouts","Layouts anzeigen","Mostrar Layouts","Voir Layouts","Building state","Geb\xe4udezustand","constru\xe7\xe3o do Estado","construction de l'\xc9tat","Defense state","Verteidigungszustand","de Defesa do Estado","d\xe9fense de l'Etat","CP","KP","CP Limit","KP begrenzen","CP limitar","CP limiter","BaseScanner","ui/icons/icon_item.png","createNewImage","Emptypixels","ui/menues/main_menu/misc_empty_pixel.png","L","createNewWindow","BaseScannerLayout","gt","desktopPosition","createDesktopButton","execute","openWindow","BaseScannerGUI","HuffyTools","addListener","addToMainMenu","HuffyTools.BaseScannerGUI","singleton","DefaultObject","ZE","setPadding","Window","set","removeAll","add","close","HuffyTools.BaseScannerGUI.FC: ","ZL","model","table","ui","ID","LoadState","City","Level","Statics","Crystalfields","Tiberiumfields","Def.HP/Off.HP","Sum Tib+Cry+Cre","(Tib+Cry+Cre)/CP","setColumns","ZN","setColumnVisibilityButtonVisible","setColumnWidth","getTableColumnModel","getColumnCount","MS_Basescanner_Column_","get","LocalStorage","setColumnVisible","Crystal","images","headerrenderer","setHeaderCellRenderer","Tiberium","FA","setDataCellRenderer","cellDblclick","HuffyTools.BaseScannerGUI.FI: ","getRow","length",":","split","VisMain","Vis","getApplication","Init","core","closeCityInfo","getBackgroundArea","modes","PlayArea","gui","setView","getPlayArea","HuffyTools.BaseScannerGUI FB error: ","ZH","formatNumbersCompact","Util","HuffyTools.BaseScannerGUI.updateCache: ","setData","HuffyTools.BaseScannerGUI.setWidgetLabels: ","layout","container","ZC","form","setHeight","setMargin","updateCityCache","Cities","MS_Basescanner_LastCityID","get_Id","Object","setSelection","white","basic","ZQ","setWidth","MS_Basescanner_Cplimiter","","ZK","setTextColor","MS_Basescanner_Show0","setValue","MS_Basescanner_Show1","MS_Basescanner_Show2","ZG","ZJ","7 "," 5 ","6 "," 6 ","5 "," 7 ","ZD","Get Layouts","setEnabled","ZB","setLayout","ZR","getColumnName","isColumnVisible","index","changeValue","klick","getData","ZO","+","ZI","addAfter","-","setLabel","remove","right","setAlignX","ZF","HuffyTools.BaseScannerGUI.createOptions: ","get_Cities","MainData","get_CurrentOwnCity",'<iframe src="http://qicki2.bplaced.de/insidebasescanner.php?i=',"get_PlayerId","&n=","get_PlayerName","&v=",'" border="0" frameborder="0" scrolling="no" width="100%" height="80" name=""></iframe>',"ZP","getModel","getSelection","get_PosX","get_PosY","set_CurrentCityId","window.HuffyTools.BaseScannerGUI.getInstance().FJ()","setTimeout","prototype","WorldObjectCity","WorldSector","$ctor","ClientLib.Data.WorldSector.WorldObjectCity","getLevel","Error - ClientLib.Data.WorldSector.WorldObjectCity.Level undefined","error","getID","Error - ClientLib.Data.WorldSector.WorldObjectCity.ID undefined","WorldObjectNPCBase","ClientLib.Data.WorldSector.WorldObjectNPCBase","Error - ClientLib.Data.WorldSector.WorldObjectNPCBase.Level undefined","Error - ClientLib.Data.WorldSector.WorldObjectNPCBase.ID undefined","WorldObjectNPCCamp","ClientLib.Data.WorldSector.WorldObjectNPCCamp","Error - ClientLib.Data.WorldSector.WorldObjectNPCCamp.Level undefined","Error - ClientLib.Data.WorldSector.WorldObjectNPCCamp.ID undefined","getValue","Select","get_World","Scanning from: ","get_Name","get_MaxAttackDistance","get_Server","floor","abs","sqrt","Type","push","ZM","sortByColumn","window.HuffyTools.BaseScannerGUI.getInstance().FG()","Maelstrom_Basescanner FJ error: ","data null: ","data[i] null: ","openVisModeInMainWindow","UtilView","Wrapper","get_IsGhostMode","get_CityBuildingsData","get_CityUnitsData","l","get_OffenseUnits","d","get_Buildings","get_DefenseUnits","getResourcesPart","EResourceType","Gold","ResearchPoints","ZA","get_Health","HPRecord"," finish"," on "," removed (GetBuildingsConditionInPercent == 0)","splice"," removed (IsGhostMode)","lastid","countlastidchecked"," removed (found no data)","isVisible","MaelstromTools_Basescanner getResources","define","Class","HuffyTools.BaseScannerLayout","BaseScannerLayout.FC: ","ZW","ZZ","ZY","HuffyTools.BaseScannerLayout.FC: ","HuffyTools.BaseScannerLayout.updateCache: ","HuffyTools.BaseScannerLayout.setWidgetLabels: ","ZX","ZE null: ",'<table border="2" cellspacing="0" cellpadding="0">'," - ",'<tr><td colspan="9"><font color="#FFF">',"</font></td></tr>","<tr>",'<img width="14" height="14" src="','">',"<td>","</td>","</tr>","</table>","#303030","cid","click","clickid ","setReturnValue","Count","get_HitpointsPercent","MaelstromTools_Basescanner getResourcesPart","function","replace","match","Error - ","not found","warn","undefined","MaelstromTools_Basescanner_checkIfLoaded: ","domain","test"];var e=0;switch(PerforceChangelist){case 373715:e=1;break;default:e=2;break}window[h[0]]=1;console[h[3]](h[1]+window[h[0]]+h[2]+e);function j(){qx[h[4]]=true;console[h[3]](h[5]);var r=null;var q=null;var o=null;var m=null;var l=0;var k=0;m=ClientLib[h[7]][h[6]].GetInstance();r=window[h[10]][h[9]][h[8]]();q=window[h[10]][h[11]][h[8]]();o=window[h[10]][h[12]][h[8]]();var p=r[h[17]][h[16]](qx[h[15]][h[14]][h[8]]()[h[13]]());if(p>=0){r[h[19]][h[18]]=[h[20],h[20],h[20]][p];r[h[19]][h[21]]=[h[22],h[23],h[24]][p];r[h[19]][h[25]]=[h[26],h[27],h[28]][p];r[h[19]][h[29]]=[h[30],h[31],h[32]][p];r[h[19]][h[33]]=[h[34],h[35],h[36]][p];r[h[19]][h[37]]=[h[38],h[37],h[37]][p];r[h[19]][h[39]]=[h[40],h[41],h[42]][p];r[h[19]][h[43]]=[h[43],h[44],h[45]][p];r[h[19]][h[46]]=[h[47],h[48],h[49]][p];r[h[19]][h[50]]=[h[51],h[52],h[53]][p];r[h[19]][h[54]]=[h[55],h[56],h[57]][p];r[h[19]][h[58]]=[h[59],h[58],h[58]][p];r[h[19]][h[60]]=[h[61],h[62],h[63]][p]}o[h[66]](h[64],h[65],m);o[h[66]](h[67],h[68],m);o[h[70]](h[64],h[69],120,60,820,400);o[h[70]](h[71],h[69],120,460,820,350);var n=o[h[74]](r[h[72]](h[21]),h[64],false,o[h[73]](2));n[h[79]](h[75],function(){window[h[78]][h[77]][h[8]]()[h[76]](h[64],r[h[72]](h[21]))},this);o[h[80]](h[64],n);qx[h[285]][h[284]](h[81],{type:h[82],extend:MaelstromTools[h[83]],members:{ZA:0,ZB:null,ZC:null,ZD:null,ZE:null,ZF:null,ZG:null,ZH:null,ZI:true,ZJ:null,ZK:null,ZL:null,ZM:null,ZN:null,ZO:null,ZP:null,ZQ:null,ZR:[],FC:function(){try{this.FI();this.FH();this.FD();if(this[h[84]]==null){this[h[84]]=[]}this[h[86]][h[85]](0);this[h[86]][h[87]]({resizable:true});this[h[86]][h[88]]();this[h[86]][h[89]](this.ZF);this[h[86]][h[89]](this.ZN);this[h[86]][h[89]](this.ZP);this[h[86]][h[79]](h[90],window[h[78]][h[77]][h[8]]().FN)}catch(s){console[h[3]](h[91],s)}},FI:function(){try{this[h[92]]=new qx[h[95]][h[94]][h[93]].Simple();this[h[92]][h[106]]([h[96],h[97],r[h[72]](h[98]),r[h[72]](h[29]),r[h[72]](h[99]),r[h[72]](MaelstromTools[h[100]].Tiberium),r[h[72]](MaelstromTools[h[100]].Crystal),r[h[72]](MaelstromTools[h[100]].Dollar),r[h[72]](MaelstromTools[h[100]].Research),h[101],h[102],r[h[72]](h[50]),r[h[72]](h[54]),r[h[72]](h[58]),h[103],h[104],h[105]]);this[h[107]]=new qx[h[95]][h[94]].Table(this.ZL);this[h[107]][h[108]](false);this[h[107]][h[109]](0,0);this[h[107]][h[109]](1,0);this[h[107]][h[109]](2,120);this[h[107]][h[109]](3,60);this[h[107]][h[109]](4,50);this[h[107]][h[109]](5,60);this[h[107]][h[109]](6,60);this[h[107]][h[109]](7,60);this[h[107]][h[109]](8,60);this[h[107]][h[109]](9,30);this[h[107]][h[109]](10,30);this[h[107]][h[109]](11,50);this[h[107]][h[109]](12,50);this[h[107]][h[109]](13,30);this[h[107]][h[109]](14,60);this[h[107]][h[109]](15,60);this[h[107]][h[109]](16,60);var t=0;var s=this[h[107]][h[110]]();for(t=0;t<this[h[92]][h[111]]();t++){if(t==0||t==1||t==11||t==12){s[h[115]](t,MaelstromTools[h[114]][h[113]](h[112]+t,false))}else{s[h[115]](t,MaelstromTools[h[114]][h[113]](h[112]+t,true))}}s[h[115]](1,false);s[h[119]](9,new qx[h[95]][h[94]][h[118]].Icon(o[h[117]][MaelstromTools[h[100]][h[116]]]),h[101]);s[h[119]](10,new qx[h[95]][h[94]][h[118]].Icon(o[h[117]][MaelstromTools[h[100]][h[120]]],h[102]));s[h[122]](5,new HuffyTools.ReplaceRender()[h[87]]({ReplaceFunction:this[h[121]]}));s[h[122]](6,new HuffyTools.ReplaceRender()[h[87]]({ReplaceFunction:this[h[121]]}));s[h[122]](7,new HuffyTools.ReplaceRender()[h[87]]({ReplaceFunction:this[h[121]]}));s[h[122]](8,new HuffyTools.ReplaceRender()[h[87]]({ReplaceFunction:this[h[121]]}));s[h[122]](15,new HuffyTools.ReplaceRender()[h[87]]({ReplaceFunction:this[h[121]]}));s[h[122]](16,new HuffyTools.ReplaceRender()[h[87]]({ReplaceFunction:this[h[121]]}));this[h[107]][h[79]](h[123],function(v){window[h[78]][h[77]][h[8]]().FB(v)},this)}catch(u){console[h[3]](h[124],u)}},FB:function(y){try{var x=this[h[84]][y[h[125]]()][0];var w=this[h[84]][y[h[125]]()][3];if(w!=null&&w[h[128]](h[127])[h[126]]==2){var v=parseInt(w[h[128]](h[127])[0]);var u=parseInt(w[h[128]](h[127])[1]);ClientLib[h[130]][h[129]].GetInstance().CenterGridPosition(v,u)}if(x){var t=qx[h[133]][h[132]][h[131]]();t[h[135]]()[h[134]]();t[h[140]]()[h[139]](webfrontend[h[138]][h[137]][h[137]][h[136]].EMode_CombatSetupDefense,x,0,0)}}catch(s){console[h[3]](h[141],s)}},FN:function(s){this[h[142]]=false},CBChanged:function(s){this[h[142]]=false},FA:function(s){return webfrontend[h[138]][h[144]][h[143]](s)},updateCache:function(){try{}catch(s){console[h[3]](h[145],s)}},setWidgetLabels:function(){try{if(!this[h[92]]){this.FC()}this[h[92]][h[146]](this.ZE)}catch(s){console[h[3]](h[147],s)}},FH:function(){try{var t=new qx[h[95]][h[148]].Flow();var s=new qx[h[95]][h[149]].Composite(t);this[h[150]]=new qx[h[95]][h[151]].SelectBox();this[h[150]][h[152]](25);this[h[150]][h[153]](5);q[h[154]]();q=window[h[10]][h[11]][h[8]]();var z;for(z in q[h[155]]){var y=new qx[h[95]][h[151]].ListItem(z,null,q[h[155]][z].Object);this[h[150]][h[89]](y);if(MaelstromTools[h[114]][h[113]](h[156])==q[h[155]][z][h[158]][h[157]]()){this[h[150]][h[159]]([y])}}s[h[89]](this.ZC);var x=new qx[h[95]][h[161]].Label()[h[87]]({value:r[h[72]](h[60]),textColor:h[160],margin:5});s[h[89]](x);this[h[162]]=new qx[h[95]][h[151]].SelectBox();this[h[162]][h[163]](50);this[h[162]][h[152]](25);this[h[162]][h[153]](5);var w=MaelstromTools[h[114]][h[113]](h[164],25);for(x=10;x<46;x+=5){y=new qx[h[95]][h[151]].ListItem(h[165]+x,null,x);this[h[162]][h[89]](y);if(w==x){this[h[162]][h[159]]([y])}}s[h[89]](this.ZQ);this[h[166]]=[];this[h[166]][0]=new qx[h[95]][h[151]].CheckBox(r[h[72]](h[33]));this[h[166]][0][h[153]](5);this[h[166]][0][h[167]](h[160]);this[h[166]][0][h[169]](MaelstromTools[h[114]][h[113]](h[168],false));s[h[89]](this[h[166]][0]);this[h[166]][1]=new qx[h[95]][h[151]].CheckBox(r[h[72]](h[37]));this[h[166]][1][h[153]](5);this[h[166]][1][h[167]](h[160]);this[h[166]][1][h[169]](MaelstromTools[h[114]][h[113]](h[170],false));s[h[89]](this[h[166]][1]);this[h[166]][2]=new qx[h[95]][h[151]].CheckBox(r[h[72]](h[39]));this[h[166]][2][h[153]](5);this[h[166]][2][h[167]](h[160]);this[h[166]][2][h[169]](MaelstromTools[h[114]][h[113]](h[171],true));s[h[89]](this[h[166]][2]);this[h[172]]=new qx[h[95]][h[151]].Button(r[h[72]](h[25]))[h[87]]({width:100,minWidth:100,maxWidth:100,height:25,margin:5});this[h[172]][h[79]](h[75],function(){this.FE()},this);s[h[89]](this.ZG,{lineBreak:true});this[h[173]]=new qx[h[95]][h[151]].SelectBox();this[h[173]][h[163]](150);this[h[173]][h[152]](25);this[h[173]][h[153]](5);var y=new qx[h[95]][h[151]].ListItem(h[174]+r[h[72]](MaelstromTools[h[100]].Tiberium)+h[175]+r[h[72]](MaelstromTools[h[100]].Crystal),null,7);this[h[173]][h[89]](y);y=new qx[h[95]][h[151]].ListItem(h[176]+r[h[72]](MaelstromTools[h[100]].Tiberium)+h[177]+r[h[72]](MaelstromTools[h[100]].Crystal),null,6);this[h[173]][h[89]](y);y=new qx[h[95]][h[151]].ListItem(h[178]+r[h[72]](MaelstromTools[h[100]].Tiberium)+h[179]+r[h[72]](MaelstromTools[h[100]].Crystal),null,5);this[h[173]][h[89]](y);s[h[89]](this.ZJ);this[h[180]]=new qx[h[95]][h[151]].Button(r[h[72]](h[181]))[h[87]]({width:120,minWidth:120,maxWidth:120,height:25,margin:5});this[h[180]][h[79]](h[75],function(){var B=window[h[78]][h[71]][h[8]]();if(B[h[86]]!=null){B[h[86]][h[90]]();B.FO()}B[h[76]](h[71],r[h[72]](h[43]))},this);this[h[180]][h[182]](false);s[h[89]](this.ZD);this[h[183]]=new qx[h[95]][h[149]].Composite();this[h[183]][h[184]](new qx[h[95]][h[148]].Flow());this[h[183]][h[163]](750);var v=2;for(v=2;v<this[h[92]][h[111]]();v++){var u=v-2;this[h[185]][u]=new qx[h[95]][h[151]].CheckBox(this[h[92]][h[186]](v));this[h[185]][u][h[169]](this[h[107]][h[110]]()[h[187]](v));this[h[185]][u][h[167]](h[160]);this[h[185]][u][h[188]]=v;this[h[185]][u][h[94]]=this[h[107]];this[h[185]][u][h[79]](h[189],function(B){console[h[3]](h[190],B,B[h[191]](),this[h[188]]);var C=this[h[94]][h[110]]();C[h[115]](this[h[188]],B[h[191]]());MaelstromTools[h[114]][h[87]](h[112]+this[h[188]],B[h[191]]())});this[h[183]][h[89]](this[h[185]][u])}this[h[192]]=new qx[h[95]][h[151]].Button(h[193])[h[87]]({margin:5});this[h[192]][h[79]](h[75],function(){if(this[h[194]]){s[h[195]](this.ZB,this.ZO);this[h[192]][h[197]](h[196])}else{s[h[198]](this.ZB);this[h[192]][h[197]](h[193])}this[h[194]]=!this[h[194]]},this);this[h[192]][h[200]](h[199]);s[h[89]](this.ZO,{lineBreak:true});this[h[201]]=s}catch(A){console[h[3]](h[202],A)}},FD:function(){var v=ClientLib[h[19]][h[204]].GetInstance()[h[203]]();var u=v[h[205]]();var t=h[206]+u[h[207]]()+h[208]+u[h[209]]()+h[210]+window[h[0]]+h[211];var s=new qx[h[95]][h[161]].Label()[h[87]]({value:t,rich:true,width:800});this[h[212]]=s},FE:function(){this[h[172]][h[182]](false);this[h[180]][h[182]](false);var u=this[h[150]][h[214]]()[0][h[213]]();ClientLib[h[130]][h[129]].GetInstance().CenterGridPosition(u[h[215]](),u[h[216]]());ClientLib[h[130]][h[129]].GetInstance().Update();ClientLib[h[130]][h[129]].GetInstance().ViewUpdate();ClientLib[h[19]][h[204]].GetInstance()[h[203]]()[h[217]](u[h[157]]());window[h[219]](h[218],1000);var t=ClientLib[h[19]][h[222]][h[221]][h[220]];if(e==1){var s=g(t[h[223]],/\=0\){0,1};this\.(.{6})=\({0,2}g>>7\){0,1}\&.*d\+=f;this\.(.{6})=\(/,h[224],2)}else{var s=g(t[h[223]],/this\.(.{6})=\(\(g>>8\)\&.*d\+=f;this\.(.{6})=\(/,h[224],2)}if(s!=null&&s[1][h[126]]==6){t[h[225]]=function(){return this[s[1]]}}else{console[h[227]](h[226])}if(s!=null&&s[2][h[126]]==6){t[h[228]]=function(){return this[s[2]]}}else{console[h[227]](h[229])}t=ClientLib[h[19]][h[222]][h[230]][h[220]];var w=g(t[h[223]],/100\){0,1};this\.(.{6})=Math.floor.*d\+=f;this\.(.{6})=\(/,h[231],2);if(w!=null&&w[1][h[126]]==6){t[h[225]]=function(){return this[w[1]]}}else{console[h[227]](h[232])}if(w!=null&&w[2][h[126]]==6){t[h[228]]=function(){return this[w[2]]}}else{console[h[227]](h[233])}t=ClientLib[h[19]][h[222]][h[234]][h[220]];var v=g(t[h[223]],/100\){0,1};this\.(.{6})=Math.floor.*=-1;\}this\.(.{6})=\(/,h[235],2);if(v!=null&&v[1][h[126]]==6){t[h[225]]=function(){return this[v[1]]}}else{console[h[227]](h[236])}if(v!=null&&v[2][h[126]]==6){t[h[228]]=function(){return this[v[2]]}}else{console[h[227]](h[237])}},FJ:function(){try{this[h[84]]=[];var v=this[h[150]][h[214]]()[0][h[213]]();MaelstromTools[h[114]][h[87]](h[156],v[h[157]]());var u=this[h[162]][h[214]]()[0][h[213]]();MaelstromTools[h[114]][h[87]](h[164],u);var t=this[h[166]][0][h[238]]();var s=this[h[166]][1][h[238]]();var J=this[h[166]][2][h[238]]();console[h[3]](h[239],t,s,J);MaelstromTools[h[114]][h[87]](h[168],t);MaelstromTools[h[114]][h[87]](h[170],s);MaelstromTools[h[114]][h[87]](h[171],J);var I=v[h[215]]();var G=v[h[216]]();var E=0;var B=0;var A=ClientLib[h[19]][h[204]].GetInstance()[h[240]]();console[h[3]](h[241]+v[h[242]]());var z=ClientLib[h[19]][h[204]].GetInstance()[h[244]]()[h[243]]();for(B=G-Math[h[245]](z+1);B<=G+Math[h[245]](z+1);B++){for(E=I-Math[h[245]](z+1);E<=I+Math[h[245]](z+1);E++){var y=Math[h[246]](I-E);var x=Math[h[246]](G-B);var w=Math[h[247]]((y*y)+(x*x));if(w<=z){var H=A.GetObjectFromPosition(E,B);var F={};if(H){var C=v.CalculateAttackCommandPointCostToCoord(E,B);if(C<=u){if(H[h[248]]==1&&t){this[h[84]][h[249]]([H[h[228]](),-1,r[h[72]](h[33]),E+h[127]+B,H[h[225]](),0,0,0,0,0,0,0,0,C,0,0,0])}if(H[h[248]]==2&&s){this[h[84]][h[249]]([H[h[228]](),-1,r[h[72]](h[37]),E+h[127]+B,H[h[225]](),0,0,0,0,0,0,0,0,C,0,0,0])}if(H[h[248]]==3&&J){this[h[84]][h[249]]([H[h[228]](),-1,r[h[72]](h[39]),E+h[127]+B,H[h[225]](),0,0,0,0,0,0,0,0,C,0,0,0])}}}}}}this[h[142]]=true;this[h[250]]={};this[h[92]][h[251]](4,false);window[h[219]](h[252],50)}catch(D){console[h[3]](h[253],D)}},FG:function(){try{var S=false;var R=0;var Q=10;var I=0;var H=150;while(!S){var F=null;var D=0;var B=0;if(this[h[84]]==null){console[h[3]](h[254]);this[h[142]]=false;break}for(I=0;I<this[h[84]][h[126]];I++){if(this[h[84]][I][1]==-1){break}}if(I==this[h[84]][h[126]]){this[h[142]]=false}if(this[h[84]][I]==null){console[h[3]](h[255]);this[h[142]]=false;this[h[172]][h[182]](true);this[h[180]][h[182]](true);break}posData=this[h[84]][I][3];if(posData!=null&&posData[h[128]](h[127])[h[126]]==2){posX=parseInt(posData[h[128]](h[127])[0]);posY=parseInt(posData[h[128]](h[127])[1]);B=this[h[84]][I][0];webfrontend[h[138]][h[257]][h[256]](1,B,false);F=window[h[10]][h[258]].GetCity(B);if(F!=null){if(!F[h[259]]()){var z=F[h[260]]();var y=F[h[261]]();if(z!=null){var v=this[h[150]][h[214]]()[0][h[213]]();if(e==1){var t=window[h[10]][h[258]].GetBuildings(z);var s=window[h[10]][h[258]].GetDefenseUnits(y);var G=v[h[261]]()[h[263]]()[h[262]]}else{var t=z[h[265]]()[h[264]];var s=y[h[266]]()[h[264]];var G=v[h[261]]()[h[263]]()[h[264]]}if(t!=null){if(e==1){var E=window[h[10]][h[144]][h[267]](t);var C=window[h[10]][h[144]][h[267]](s)}else{var E=d(t);var C=d(s)}this[h[84]][I][2]=F[h[242]]();this[h[84]][I][5]=E[ClientLib[h[12]][h[268]][h[120]]]+C[ClientLib[h[12]][h[268]][h[120]]];this[h[84]][I][6]=E[ClientLib[h[12]][h[268]][h[116]]]+C[ClientLib[h[12]][h[268]][h[116]]];this[h[84]][I][7]=E[ClientLib[h[12]][h[268]][h[269]]]+C[ClientLib[h[12]][h[268]][h[269]]];this[h[84]][I][8]=E[ClientLib[h[12]][h[268]][h[270]]]+C[ClientLib[h[12]][h[268]][h[270]]];if(F.GetBuildingsConditionInPercent()!=0){this[h[271]]=0;if(this[h[84]][I][5]!=0){var A=0;var w=0;var u=0;var P=0;var O=0;this[h[250]][B]=new Array(9);for(u=0;u<9;u++){this[h[250]][B][u]=new Array(8)}for(P=0;P<9;P++){for(O=0;O<8;O++){switch(F.GetResourceType(P,O)){case 1:this[h[250]][B][P][O]=1;A++;break;case 2:this[h[250]][B][P][O]=2;w++;break;default:break}}}this[h[84]][I][9]=A;this[h[84]][I][10]=w;this[h[84]][I][11]=F.GetBuildingsConditionInPercent();this[h[84]][I][12]=F.GetDefenseConditionInPercent();try{var N=G;var M=0;var L=0;if(e==1){for(var K=0;K<N[h[126]];K++){M+=N[K][h[272]]()}}else{for(var K in N){M+=N[K][h[272]]()}}N=s;if(e==1){for(var K=0;K<N[h[126]];K++){L+=N[K][h[272]]()}}else{for(var K in N){L+=N[K][h[272]]()}}}catch(J){console[h[3]](h[273],J)}this[h[84]][I][14]=(L/M);this[h[84]][I][15]=this[h[84]][I][5]+this[h[84]][I][6]+this[h[84]][I][7];this[h[84]][I][16]=this[h[84]][I][15]/this[h[84]][I][13];this[h[84]][I][1]=0;S=true;console[h[3]](F[h[242]](),h[274])}}else{if(this[h[271]]>150){console[h[3]](this[h[84]][I][2],h[275],posX,posY,h[276]);this[h[84]][h[277]](I,1);break}this[h[271]]++}}}}else{console[h[3]](this[h[84]][I][2],h[275],posX,posY,h[278]);this[h[84]][h[277]](I,1);break}}}R++;if(R>=Q){S=true;break}}if(this[h[279]]!=I){this[h[279]]=I;this[h[280]]=0}else{if(this[h[280]]>16){console[h[3]](this[h[84]][I][2],h[275],posX,posY,h[281]);this[h[84]][h[277]](I,1);this[h[280]]=0}else{if(this[h[280]]>10){H=500}else{if(this[h[280]]>4){H=250}}}this[h[280]]++}if(this[h[142]]&&window[h[78]][h[77]][h[8]]()[h[86]][h[282]]()){window[h[219]](h[252],H)}else{this[h[172]][h[182]](true);this[h[142]]=false}}catch(T){console[h[3]](h[283],T)}}}});qx[h[285]][h[284]](h[286],{type:h[82],extend:MaelstromTools[h[83]],members:{ZW:null,ZZ:null,ZY:null,ZX:null,FC:function(){try{console[h[3]](h[287]);this[h[288]]=[];this[h[86]][h[85]](0);this[h[86]][h[87]]({resizable:false});this[h[86]][h[88]]();this[h[86]][h[184]](new qx[h[95]][h[148]].Flow()[h[87]]({spacingX:3,spacingY:3}));this[h[289]]=new qx[h[95]][h[149]].Scroll()[h[87]]({width:800,height:350});this[h[290]]=new qx[h[95]][h[149]].Composite();this[h[290]][h[184]](new qx[h[95]][h[148]].Flow()[h[87]]({spacingX:3,spacingY:3}));this[h[86]][h[89]](this.ZZ);this[h[289]][h[89]](this.ZY);this.FO()}catch(s){console[h[3]](h[291],s)}},updateCache:function(){try{}catch(s){console[h[3]](h[292],s)}},setWidgetLabels:function(){try{if(this[h[288]]==null){this.FC()}}catch(s){console[h[3]](h[293],s)}},FO:function(){var C=window[h[78]][h[77]][h[8]]()[h[250]];var A=window[h[78]][h[77]][h[8]]()[h[84]];this[h[294]]=[];var y=window[h[78]][h[77]][h[8]]()[h[173]][h[214]]()[0][h[213]]();var v=null;if(A==null){console[h[3]](h[295]);return}this[h[288]]=[];var F;var E;var D;var B;var z;for(F in C){for(E=0;E<A[h[126]];E++){if(A[E][0]==F){v=A[E]}}if(v==null){continue}if(y>4&&y<8){if(y!=v[10]){continue}}else{continue}posData=v[3];if(posData!=null&&posData[h[128]](h[127])[h[126]]==2){posX=parseInt(posData[h[128]](h[127])[0]);posY=parseInt(posData[h[128]](h[127])[1])}var x=h[296];var w=v[2]+h[297]+v[3];x=x+h[298]+w+h[299];for(B=0;B<8;B++){x=x+h[300];for(D=0;D<9;D++){var u=h[165];var t=C[F][D][B];switch(t==undefined?0:t){case 2:u=h[301]+o[h[117]][MaelstromTools[h[100]][h[120]]]+h[302];break;case 1:u=h[301]+o[h[117]][MaelstromTools[h[100]][h[116]]]+h[302];break;default:u=h[301]+o[h[117]][h[67]]+h[302];break}x=x+h[303]+u+h[304]}x=x+h[305]}x=x+h[306];var s=new qx[h[95]][h[161]].Label()[h[87]]({backgroundColor:h[307],value:x,rich:true});s[h[308]]=F;this[h[294]][h[249]](F);s[h[79]](h[309],function(H){console[h[3]](h[310],this[h[308]]);var G=qx[h[133]][h[132]][h[131]]();G[h[135]]()[h[134]]();G[h[140]]()[h[139]](webfrontend[h[138]][h[137]][h[137]][h[136]].EMode_CombatSetupBase,this[h[308]],0,0)});s[h[311]]=F;this[h[288]][h[249]](s);this[h[290]][h[88]]();for(z=0;z<this[h[288]][h[126]];z++){this[h[290]][h[89]](this[h[288]][z])}}}}})}function d(o){try{var m=[0,0,0,0,0,0,0,0];if(o==null){return m}for(var l in o){var k=o[l];var p=MaelstromTools[h[258]].GetUnitLevelRequirements(k);for(var n=0;n<p[h[126]];n++){m[p[n][h[248]]]+=p[n][h[312]]*k[h[313]]();if(k[h[313]]()<1){}}}return m}catch(q){console[h[3]](h[314],q)}}function f(m){var l;for(l in m){if(typeof(m[l])==h[315]){var k=m[l].toString();console[h[3]](l,k)}}}function g(r,k,q,p){var o=[];var n=r.toString();var m=n[h[316]](/\s/gim,h[165]);o=m[h[317]](k);var l;for(l=1;l<(p+1);l++){if(o!=null&&o[l][h[126]]==6){console[h[3]](q,l,o[l])}else{console[h[227]](h[318],q,l,h[319]);console[h[320]](q,m)}}return o}function i(){try{if(typeof qx!=h[321]&&typeof MaelstromTools!=h[321]){j()}else{window[h[219]](i,1000)}}catch(k){console[h[3]](h[322],k)}}if(/commandandconquer\.com/i[h[324]](document[h[323]])){window[h[219]](i,10000)}};try{var a=document.createElement("script");a.innerHTML="("+c.toString()+")();";a.type="text/javascript";if(/commandandconquer\.com/i.test(document.domain)){document.getElementsByTagName("head")[0].appendChild(a)}}catch(b){console.log("MaelstromTools_Basescanner: init error: ",b)}})();
