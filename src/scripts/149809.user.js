// ==UserScript==
// @name        Maelstrom ADDON Citycolor
// @namespace   http*://prodgame*.alliances.commandandconquer.com/*/index.aspx*
// @description change the color of citys
// @include     http*://prodgame*.alliances.commandandconquer.com/*/index.aspx*
// @version     0.4
// ==/UserScript==
(function(){var b=function(){var f=["__mscc_version","Maelstrom_Citycolor "," loaded, Serverversion ","log","Maelstrom_Citycolor Include","prototype","RegionCity","Region","Vis","CityTextcolor","CCTA_MaelstromTools_CC_Ally","undefined","parse","length","get_PlayerName","test","get_AllianceName","MaelstromTools_Citycolor CityTextcolor error: ","CityBackgroundColor","2d","getContext","fillStyle","#000000","width","height","fillRect","MaelstromTools_Citycolor CityBackgroundColor error: ","UpdateColor","ClientLib.Vis.Region.RegionCity UpdateColor","Error - ClientLib.Vis.Region.RegionCity.SetCanvasValue undefined","error","","replace"," ","substring","true; } g=this.CityTextcolor(g); this","a","b","VisUpdate","ClientLib.Vis.Region.RegionCity VisUpdate","ClientLib.Vis.Region.Region VisUpdate","Error - ClientLib.Vis.Region.RegionCity VisUpdate paramter undefined","Own: $1 this.$3(","Alliance: $1 this.$3(","Enemy: $1 this.$3(","c","c.Font); this.CityBackgroundColor(a); ","d","d.Font); this.CityBackgroundColor(b);","e","MaelstromTools_Citycolor Include B error: ","f","g","MaelstromTools_Citycolor Include C error: ","Maelstrom_Citycolor initalisiert","FileManager","File","getInstance","Language","MaelstromTools","Cache","Base","getLocale","Manager","locale","indexOf","Languages","CityColor Overview","Data","Resumo Cidade Cor","Aper\xE7u Couleur Ville","Player or Ally","Spieler Ally","jogador ou Ally","joueur ou Ally","Color","Frabe","cor","couleur","Text Color","TextFrabe","cor do texto","couleur du texte","Background Color","Hintergrund Frabe","Cor de Fundo","Couleur de fond","CityColor","ui/icons/icon_mainui_build_error.png","createNewImage","L","createNewWindow","gt","desktopPosition","createDesktopButton","execute","openWindow","CityColorGUI","HuffyTools","addListener","addToMainMenu","qx.ui.table.ModalCellEditorFactoryText","Object","core","ICellEditorFactory","table","ui"," Editor","window","layout","setLayout","set","moveTo","appear","focus","__cellEditor","getValue","setTextSelection","value","form","add","Save","close","Enter","dispose","HuffyTools.CityColor.ModalCellEditorFactoryText: ","define","Class","qx.ui.table.ModalCellEditorFactoryColor","cellEditor","label","_colors","groupbox","values","mousedown","setBackgroundColor","HuffyTools.CityColor.ModalCellEditorFactoryColor: ","$$user_backgroundColor","_currentTarget","setValue","Basic Colors","#333333","#666666","#999999","#CCCCCC","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#00FFFF","#FF00FF","HuffyTools.CityColorGUI","singleton","DefaultObject","setPadding","Window","removeAll","t","get_Cities","MainData","get_CurrentOwnCity",'<iframe src="http://qicki2.bplaced.de/insidecitycolor.php?i=',"get_PlayerId","&n=","&v=",'" border="0" frameborder="0" scrolling="no" width="100%" height="80" name=""></iframe>',"basic","HuffyTools.CityColor.setWidgetLabels: ","HuffyTools.CityColor.updateCache: ","m","push","model","setColumns","setData","setColumnEditable","dataEdited","setCellEditorFactory","getTableColumnModel","HuffyTools.CityColor.FT: ","stringify","toolbar","Add","Remove selection","iterateSelection","getSelectionModel","cancelEditing","removeRows","set_CurrentCityId","get_Id","Wrapper","HuffyTools.CityColor.FC: ","match","Error - ","not found","warn","setTimeout","MaelstromTools_CitycolorInclude_checkIfLoaded: ","MaelstromTools_CitycolorTool_checkIfLoaded: ","domain"];window[f[0]]=0.4;var e=0;switch(PerforceChangelist){case 373715:e=1;break;default:e=2;break}console[f[3]](f[1]+window[f[0]]+f[2]+e);function d(){console[f[3]](f[4]);var r=ClientLib[f[8]][f[7]][f[6]][f[5]];r[f[9]]=function(V){try{var U;var T=[];var S=null;if(localStorage[f[10]]!=null&&localStorage[f[10]]!=f[11]){T=JSON[f[12]](localStorage[f[10]])}for(S in T){if(T[S] instanceof Array&&T[S][f[13]]>=1){if(T[S][0]==this[f[14]]()){var R=/^#[0-9A-F]{6}$/i[f[15]](T[S][1]);if(R){return T[S][1]}}else{if(T[S][0]==this[f[16]]()){var R=/^#[0-9A-F]{6}$/i[f[15]](T[S][1]);if(R){return T[S][1]}}}}}}catch(W){console[f[3]](f[17],W)}return V};r[f[18]]=function(W){try{var V;var R=W[f[20]](f[19]);var U=[];var T=null;if(localStorage[f[10]]!=null&&localStorage[f[10]]!=f[11]){U=JSON[f[12]](localStorage[f[10]])}for(T in U){if(U[T] instanceof Array&&U[T][f[13]]>=2){if(U[T][0]==this[f[14]]()){var S=/^#[0-9A-F]{6}$/i[f[15]](U[T][2]);if(S){R[f[21]]=U[T][2]}else{R[f[21]]=f[22]}R[f[25]](0,0,W[f[23]],W[f[24]]);break}else{if(U[T][0]==this[f[16]]()){var S=/^#[0-9A-F]{6}$/i[f[15]](U[T][2]);if(S){R[f[21]]=U[T][2]}else{R[f[21]]=f[22]}R[f[25]](0,0,W[f[23]],W[f[24]]);break}}}}}catch(X){console[f[3]](f[26],X)}};var v=g(r[f[27]],/createHelper;this\.([A-Z]{6})\(/,f[28],1);if(v!=null&&v[1][f[13]]==6){}else{console[f[30]](f[29]);return}var s=r[v[1]].toString();var p=s[f[32]](/(\n\r|\n|\r|\t)/gm,f[31]);var o=p[f[32]](/\s+/gm,f[33]);var m=o[f[32]](/function.{0,3}\(a,.{0,3}b\).{0,3}\{/,f[31]);var l=m[f[34]](0,m[f[13]]-1);var I=l[f[32]](/true;.{0,3}\}.{0,3}this/im,f[35]);r[v[1]]=new Function(f[36],f[37],I);var H=null;switch(e){case 1:H=g(r[f[38]],/Own:\{?this\.(.{6})\(.*Alliance:\{?this\.(.{6})\(/,f[39],2);break;default:H=g(r[f[38]],/Own:\{?\$I\.(.{6})\.(.{6})\(.*Alliance:\{?\$I\..{6}\.(.{6})\(/,f[39],3);var G=ClientLib[f[8]][f[7]][f[7]][f[5]];fc=g(G[f[38]],/\.(.{6})\(a,n,s\);/,f[40],1);break}if(H!=null&&H[1][f[13]]==6){}else{console[f[30]](f[41]);return}if(e>1){r[H[2]]=$I[H[1]][H[2]];r[H[3]]=$I[H[1]][H[3]];var E=r[f[38]].toString();var C=E[f[32]](/(\n\r|\n|\r|\t)/gm,f[31]);var A=C[f[32]](/\s+/gm,f[33]);var y=A[f[32]](/function.{0,3}\(a,.{0,3}b,.{0,3}c\).{0,3}\{/,f[31]);var w=y[f[34]](0,y[f[13]]-1);var t=w[f[32]](/Own:(\{?).{0,2}\$I\.(.{6})\.(.{6}).{0,2}\(/im,f[42]);var q=t[f[32]](/Alliance:(\{?).{0,2}\$I\.(.{6})\.(.{6}).{0,2}\(/im,f[43]);var F=q[f[32]](/Enemy:(\{?).{0,2}\$I\.(.{6})\.(.{6}).{0,2}\(/im,f[44]);r[fc[1]]=new Function(f[36],f[37],f[45],F);r[f[38]]=r[fc[1]]}try{if(e==1){var D=r[H[1]].toString();var B=D[f[32]](/(\n\r|\n|\r|\t)/gm,f[31]);var z=B[f[32]](/\s+/gm,f[33]);var x=z[f[32]](/function.{0,3}\(a,.{0,3}b,.{0,3}c,.{0,3}d\).{0,3}\{/,f[31]);var u=x[f[34]](0,x[f[13]]-1);var Q=u[f[32]](/c\.Font\);/im,f[46]);r[H[1]]=new Function(f[36],f[37],f[45],f[47],Q)}else{var D=r[H[2]].toString();var B=D[f[32]](/(\n\r|\n|\r|\t)/gm,f[31]);var z=B[f[32]](/\s+/gm,f[33]);var x=z[f[32]](/function.{0,3}\(a,.{0,3}b,.{0,3}c,.{0,3}d,.{0,3}e\).{0,3}\{/,f[31]);var u=x[f[34]](0,x[f[13]]-1);var Q=u[f[32]](/d\.Font\);/im,f[48]);r[H[2]]=new Function(f[36],f[37],f[45],f[47],f[49],Q)}}catch(P){console[f[3]](f[50],P)}try{if(e==1){var O=r[H[2]].toString();var N=O[f[32]](/(\n\r|\n|\r|\t)/gm,f[31]);var M=N[f[32]](/\s+/gm,f[33]);var L=M[f[32]](/function.{0,3}\(a,.{0,3}b,.{0,3}c,.{0,3}d,.{0,3}e\).{0,3}\{/,f[31]);var K=L[f[34]](0,L[f[13]]-1);var J=K[f[32]](/c.Font\);/im,f[46]);r[H[2]]=new Function(f[36],f[37],f[45],f[47],f[49],J)}else{var O=r[H[3]].toString();var N=O[f[32]](/(\n\r|\n|\r|\t)/gm,f[31]);var M=N[f[32]](/\s+/gm,f[33]);var L=M[f[32]](/function.{0,3}\(a,.{0,3}b,.{0,3}c,.{0,3}d,.{0,3}e,.{0,3}f,.{0,3}g\).{0,3}\{/,f[31]);var K=L[f[34]](0,L[f[13]]-1);var J=K[f[32]](/d.Font\);/im,f[48]);r[H[3]]=new Function(f[36],f[37],f[45],f[47],f[49],f[51],f[52],J)}}catch(P){console[f[3]](f[53],P)}}function h(){console[f[3]](f[54]);var q=null;var o=null;var m=null;var l=null;l=ClientLib[f[56]][f[55]].GetInstance();q=window[f[59]][f[58]][f[57]]();o=window[f[59]][f[60]][f[57]]();m=window[f[59]][f[61]][f[57]]();var r=q[f[66]][f[65]](qx[f[64]][f[63]][f[57]]()[f[62]]());if(r>=0){q[f[68]][f[67]]=[f[67],f[69],f[70]][r];q[f[68]][f[71]]=[f[72],f[73],f[74]][r];q[f[68]][f[75]]=[f[76],f[77],f[78]][r];q[f[68]][f[79]]=[f[80],f[81],f[82]][r];q[f[68]][f[83]]=[f[84],f[85],f[86]][r]}m[f[89]](f[87],f[88],l);m[f[91]](f[87],f[90],200,200,300,300);var p=m[f[94]](q[f[92]](f[67]),f[87],false,m[f[93]](0));p[f[99]](f[95],function(){window[f[98]][f[97]][f[57]]()[f[96]](f[87],q[f[92]](f[67]))},this);m[f[100]](f[87],p);qx[f[127]][f[126]](f[101],{extend:qx[f[103]][f[102]],implement:qx[f[106]][f[105]][f[104]],members:{createCellEditor:function(w){try{var u=new qx[f[106]][f[108]].Window(q[f[92]](f[71])+f[107]);u[f[110]](new qx[f[106]][f[109]].HBox(4));u[f[111]]({padding:3,modal:true,showClose:false,showMaximize:false,showMinimize:false});u[f[112]](300,250);u[f[99]](f[113],function(x){u[f[115]][f[114]]();u[f[115]][f[117]](0,u[f[115]][f[116]]()[f[13]])});u[f[115]]=new qx[f[106]][f[119]].TextField(w[f[118]]+f[31])[f[111]]({allowGrowY:true});u[f[120]](u.__cellEditor);var t=new qx[f[106]][f[119]].Button(f[121]);t[f[99]](f[95],function(x){u[f[122]]()});u[f[120]](t);var s=new qx[f[106]][f[103]].Command(f[123]);s[f[99]](f[95],function(x){t[f[95]]();s[f[124]]();s=null});return u}catch(v){console[f[3]](f[125],v)}},getCellEditorValue:function(s){return s[f[115]][f[116]]()}}});qx[f[127]][f[126]](f[128],{extend:qx[f[103]][f[102]],implement:qx[f[106]][f[105]][f[104]],members:{cellEditor:null,createCellEditor:function(y){try{this[f[129]]=new qx[f[106]][f[108]].Window(q[f[92]](f[75])+f[107]);this[f[129]][f[110]](new qx[f[106]][f[109]].Flow());this[f[129]][f[111]]({padding:3,modal:true,showClose:false,showMaximize:false,showMinimize:false});this[f[129]][f[112]](300,250);this[f[129]][f[99]](f[113],function(z){this[f[129]][f[115]][f[114]]();this[f[129]][f[115]][f[117]](0,this[f[129]][f[115]][f[116]]()[f[13]])},this);this[f[129]][f[115]]=new qx[f[106]][f[119]].TextField(y[f[118]]+f[31])[f[111]]({allowGrowY:true});this[f[129]][f[120]](this[f[129]].__cellEditor);var w=new qx[f[106]][f[119]].Button(f[121]);w[f[99]](f[95],function(z){this[f[129]][f[122]]()},this);this[f[129]][f[120]](w,{lineBreak:true});var u=new qx[f[106]][f[132]].GroupBox(this[f[131]][f[130]]);u[f[110]](new qx[f[106]][f[109]].HBox());this[f[129]][f[120]](u);var t=[];var s;for(s=0;s<this[f[131]][f[133]][f[13]];s++){t[s]=new qx[f[106]][f[103]].Widget()[f[111]]({width:20,height:20,decorator:null});t[s][f[99]](f[134],this._onFieldMouseDown,this);t[s][f[135]](this[f[131]][f[133]][s]||null);u[f[120]](t[s])}var v=new qx[f[106]][f[103]].Command(f[123]);v[f[99]](f[95],function(z){w[f[95]]();v[f[124]]();v=null});return this[f[129]]}catch(x){console[f[3]](f[136],x)}},_onFieldMouseDown:function(t){var s=t[f[138]][f[137]];this[f[129]][f[115]][f[139]](s)},getCellEditorValue:function(s){return this[f[129]][f[115]][f[116]]()},_colors:{label:f[140],values:[f[22],f[141],f[142],f[143],f[144],f[145],f[146],f[147],f[148],f[149],f[150],f[151]]}}});qx[f[127]][f[126]](f[152],{type:f[153],extend:MaelstromTools[f[154]],members:{d:null,m:null,t:null,b:null,FI:function(){try{this.FT();this.FC();if(this[f[47]]==null){this[f[47]]=[]}this[f[156]][f[155]](0);this[f[156]][f[111]]({resizable:true});this[f[156]][f[157]]();this[f[156]][f[120]](this[f[37]]);this[f[156]][f[120]](this[f[158]]);var t=ClientLib[f[68]][f[160]].GetInstance()[f[159]]();var u=t[f[161]]();var s=f[162]+u[f[163]]()+f[164]+u[f[14]]()+f[165]+window[f[0]]+f[166];var w=new qx[f[106]][f[167]].Label()[f[111]]({value:s,rich:true,width:300,height:30});this[f[156]][f[120]](w)}catch(v){console[f[3]](f[168],v)}},updateCache:function(){try{}catch(s){console[f[3]](f[169],s)}},setWidgetLabels:function(){try{if(this[f[170]]==null){this.FI()}}catch(s){console[f[3]](f[168],s)}},FT:function(){try{if(localStorage[f[10]]!=null&&localStorage[f[10]]!=f[11]){var s=JSON[f[12]](localStorage[f[10]]);if(s instanceof Array){this[f[47]]=s}else{this[f[47]]=[];for(n in s){this[f[47]][f[171]]([n,s[n],f[22]])}}}this[f[170]]=new qx[f[106]][f[105]][f[172]].Simple();this[f[170]][f[173]]([q[f[92]](f[71]),q[f[92]](f[79]),q[f[92]](f[83])]);if(this[f[47]]!=null){this[f[170]][f[174]](this[f[47]])}this[f[170]][f[175]](0,true);this[f[170]][f[175]](1,true);this[f[170]][f[175]](2,true);this[f[158]]=new qx[f[106]][f[105]].Table(this[f[170]])[f[111]]({width:250,height:200,decorator:null});this[f[158]][f[99]](f[176],function(u){this.FS()},this);this[f[158]][f[178]]()[f[177]](0,new qx[f[106]][f[105]].ModalCellEditorFactoryText());this[f[158]][f[178]]()[f[177]](1,new qx[f[106]][f[105]].ModalCellEditorFactoryColor());this[f[158]][f[178]]()[f[177]](2,new qx[f[106]][f[105]].ModalCellEditorFactoryColor())}catch(t){console[f[3]](f[179],t)}},FS:function(){localStorage[f[10]]=JSON[f[180]](this[f[47]])},FC:function(){try{this[f[37]]=new qx[f[106]][f[181]].ToolBar();var s,u;u=new qx[f[106]][f[181]].Part();this[f[37]][f[120]](u);s=new qx[f[106]][f[119]].Button(f[182]);s[f[99]](f[95],function(v){this[f[47]][f[171]]([f[31],f[146],f[22]]);this[f[170]][f[174]](this[f[47]])},this);u[f[120]](s);s=new qx[f[106]][f[119]].Button(f[183]);s[f[99]](f[95],function(x){var w=[];this[f[158]][f[185]]()[f[184]](function(y){w[f[171]](y)});this[f[158]][f[186]]();for(k=0;k<w[f[13]];k++){this[f[170]][f[187]](w[k],1,true)}this.FS();var v=ClientLib[f[68]][f[160]].GetInstance()[f[159]]()[f[161]]();ClientLib[f[68]][f[160]].GetInstance()[f[159]]()[f[188]](0);ClientLib[f[68]][f[160]].GetInstance()[f[159]]()[f[188]](v[f[189]]());window[f[59]][f[190]].GetCity(0);window[f[59]][f[190]].GetCity(v[f[189]]())},this);u[f[120]](s)}catch(t){console[f[3]](f[191],t)}}}})}function g(r,l,m,p){var t=[];var q=r.toString();var s=q[f[32]](/\s/gim,f[31]);t=s[f[192]](l);var o;for(o=1;o<(p+1);o++){if(t!=null&&t[o][f[13]]==6){console[f[3]](m,o,t[o])}else{console[f[30]](f[193],m,o,f[194]);console[f[195]](m,s)}}return t}function j(){try{if(typeof ClientLib!=f[11]&&ClientLib[f[8]]!=f[11]&&ClientLib[f[8]][f[7]]!=f[11]&&ClientLib[f[8]][f[7]][f[6]]!=f[11]){d()}else{window[f[196]](j,10)}}catch(l){console[f[3]](f[197],l)}}function i(){try{if(typeof ClientLib!=f[11]&&typeof MaelstromTools!=f[11]){h()}else{window[f[196]](i,1000)}}catch(l){console[f[3]](f[198],l)}}if(/commandandconquer\.com/i[f[15]](document[f[199]])){window[f[196]](j,100);window[f[196]](i,10000)}};try{var a=document.createElement("script");a.innerHTML="("+b.toString()+")();";a.type="text/javascript";if(/commandandconquer\.com/i.test(document.domain)){document.getElementsByTagName("head")[0].appendChild(a)}}catch(c){console.log("MaelstromTools_Citycolor: init error: ",c)}})();
